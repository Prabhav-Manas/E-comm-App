<div class="container">
  <mat-paginator [length]="totalProducts" [pageSize]="productsPerPage" [pageSizeOptions]="[5, 10, 25, 100]" (page)="onPageChanged($event)"></mat-paginator>
  <div class="row mt-3">
    <div class="col-md-6" *ngFor="let product of products">
      <div class="card mb-3">
        <h2 class="card-header">{{ product.productName }}</h2>
        <div class="d-md-flex justify-content-around">
          <div class="product-image" *ngIf="product.imagePath.length > 0">
            <img [src]="product.imagePath" class="img" alt="{{ product.productName }}"/>
          </div>

          <div class="card-body">
            <h5 class="card-title">{{ product.category }}</h5>
            <p class="card-text">{{ product.description }}</p>
            <p class="card-text"><strong>Price:</strong> {{ product.price }}</p>
            <div class="d-md-flex justify-content-around">
              <button type="button" class="btn btn-primary" (click)="onEditProduct(product)">Edit</button>

              <button type="button" class="btn btn-danger" (click)="onDeleteProduct(product)">Delete</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <mat-paginator [length]="totalProducts" [pageSize]="productsPerPage" [pageSizeOptions]="[5, 10, 25, 100]" (page)="onPageChanged($event)" aria-label="Select page"></mat-paginator> -->
</div>

<!-- Update Form -->
<!-- Add this below the product cards and paginator -->
<div *ngIf="editingProduct" class="modal" tabindex="-1" style="display: block">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Update Product</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="editingProduct = null; updateProductForm.reset()"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="updateProductForm" (ngSubmit)="onUpdateProduct()">
          <div class="form-group">
            <label for="category">Category</label>
            <input id="category" formControlName="category" class="form-control"/>
          </div>
          <div class="form-group">
            <label for="productName">Product Name</label>
            <input id="productName" formControlName="productName" class="form-control"/>
          </div>
          <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" formControlName="description" class="form-control"></textarea>
          </div>
          <div class="form-group">
            <label for="price">Price</label>
            <input id="price" type="number" formControlName="price" class="form-control"/>
          </div>
          <div class="form-group">
            <label for="startDate">Start Date</label>
            <input id="startDate" type="date" formControlName="startDate" class="form-control"/>
          </div>
          <div class="form-group">
            <label for="closeDate">Close Date</label>
            <input id="closeDate" type="date" formControlName="closeDate" class="form-control"/>
          </div>
          <div class="form-group">
            <label for="discount">Discount</label>
            <input id="discount" type="number" formControlName="discount" class="form-control"/>
          </div>
          <div class="form-group">
            <label for="image">Product Image</label>
            <input id="image" type="file" (change)="onFileSelected($event)" class="form-control"/>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Update Product</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="editingProduct = null; updateProductForm.reset()">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>